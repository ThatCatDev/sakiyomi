---
import type { VotingStatus } from '../../lib/room/types';

interface Props {
  votingStatus: VotingStatus;
}

const { votingStatus } = Astro.props;
---

<div
  id="results-section"
  class:list={['bg-surface-card rounded-xl p-6 border border-border-default', { 'hidden': votingStatus !== 'revealed' }]}
>
  <!-- Header with average -->
  <div class="flex items-center justify-between mb-6">
    <h3 class="text-lg font-semibold text-content-primary">Results</h3>
    <div class="flex items-center gap-2">
      <span class="text-content-muted text-sm">Average:</span>
      <span class="text-2xl font-bold text-content-primary" id="vote-average">-</span>
    </div>
  </div>

  <!-- Pie chart and legend -->
  <div class="flex flex-col sm:flex-row items-center gap-6 mb-6">
    <svg id="pie-chart" viewBox="0 0 100 100" class="w-32 h-32 sm:w-40 sm:h-40 flex-shrink-0">
      <!-- Pie slices will be populated by JS -->
    </svg>
    <div id="pie-legend" class="flex flex-wrap gap-2">
      <!-- Legend items will be populated by JS -->
    </div>
  </div>

  <!-- Vote groups - each vote value with who voted for it -->
  <div id="vote-results" class="space-y-4">
    <!-- Results will be populated by JS -->
  </div>
</div>
