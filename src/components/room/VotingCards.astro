---
import type { VotingStatus } from '../../lib/room/types';

interface Props {
  currentVote?: string | null;
  votingStatus: VotingStatus;
  voteOptions: string[];
}

const { currentVote, votingStatus, voteOptions } = Astro.props;
const isDisabled = votingStatus !== 'voting';
// Determine grid columns based on number of options
const gridCols = voteOptions.length <= 5 ? 'grid-cols-5' : voteOptions.length <= 7 ? 'grid-cols-7' : 'grid-cols-5 sm:grid-cols-10';
---

<div
  id="vote-cards-section"
  class:list={[{ 'opacity-50 pointer-events-none': isDisabled }]}
  data-voting-status={votingStatus}
>
  <div class={`grid ${gridCols} gap-2 mb-8`} id="vote-cards">
    {voteOptions.map((value) => (
      <button
        class:list={[
          'vote-card aspect-[3/4] bg-surface-card hover:bg-surface-hover border-2 rounded-xl flex items-center justify-center text-lg sm:text-xl font-bold text-content-primary transition-all',
          currentVote === value ? 'border-brand bg-brand-light selected' : 'border-border-default hover:border-brand'
        ]}
        data-vote={value}
        disabled={isDisabled}
      >
        {value}
      </button>
    ))}
  </div>
</div>

<style>
  .vote-card:hover:not(:disabled) {
    transform: scale(1.05) translateY(-2px);
  }

  .vote-card:active:not(:disabled) {
    transform: scale(0.98);
  }

  .vote-card.selected {
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
  }
</style>
