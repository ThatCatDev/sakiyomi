---
import type { VotingStatus, ValidVote } from '../../lib/room/types';
import { VALID_VOTES } from '../../lib/room/types';

interface Props {
  currentVote?: string | null;
  votingStatus: VotingStatus;
}

const { currentVote, votingStatus } = Astro.props;
const isDisabled = votingStatus !== 'voting';
---

<div
  id="vote-cards-section"
  class:list={[{ 'opacity-50 pointer-events-none': isDisabled }]}
  data-voting-status={votingStatus}
>
  <div class="grid grid-cols-5 sm:grid-cols-10 gap-2 mb-8" id="vote-cards">
    {VALID_VOTES.map((value) => (
      <button
        class:list={[
          'vote-card aspect-[3/4] bg-slate-800 hover:bg-slate-700 border-2 rounded-xl flex items-center justify-center text-lg sm:text-xl font-bold text-white transition-all',
          currentVote === value ? 'border-indigo-500 bg-indigo-600/20 selected' : 'border-slate-600 hover:border-indigo-500'
        ]}
        data-vote={value}
        disabled={isDisabled}
      >
        {value}
      </button>
    ))}
  </div>
</div>

<style>
  .vote-card:hover:not(:disabled) {
    transform: scale(1.05) translateY(-2px);
  }

  .vote-card:active:not(:disabled) {
    transform: scale(0.98);
  }

  .vote-card.selected {
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
  }
</style>
